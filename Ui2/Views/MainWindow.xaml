<Window x:Class="Ui2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Ui2" xmlns:viewModel="clr-namespace:Ui2.ViewModels"
        xmlns:system="clr-namespace:System;assembly=System.Runtime"
        xmlns:wpfui="clr-namespace:AvalonDock.Themes.WPFUI;assembly=AvalonDock.Themes.WPFUI"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        d:DataContext="{d:DesignInstance Type=viewModel:WorkspaceViewModel, IsDesignTimeCreatable=False}"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
    <Window.Resources>
        <system:Boolean x:Key="TRUE">True</system:Boolean>
        <system:Boolean x:Key="FALSE">False</system:Boolean>
        <BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" /> <!-- TitleBar -->
            <RowDefinition Height="Auto" /> <!-- Menu / Toolbar -->
            <RowDefinition Height="*" />    <!-- AvalonDock -->
        </Grid.RowDefinitions>

        <!-- WPFUI Title Bar (Styled Window Controls) -->
        <ui:TitleBar
            x:Name="TitleBar"
            Title="{Binding ViewModel.ApplicationTitle}"
            Grid.Row="0"
            CloseWindowByDoubleClickOnIcon="True">
            <ui:TitleBar.Icon>
                <ui:ImageIcon Source="pack://application:,,,/Assets/wpfui-icon-256.png" />
            </ui:TitleBar.Icon>
        </ui:TitleBar>

        <!-- Custom Menu and Controls (Dock commands, Theme) -->
        <WrapPanel Grid.Row="1" Margin="5" VerticalAlignment="Center">
            <Menu VerticalAlignment="Center">
                <MenuItem Header="File">
                    <MenuItem Command="{Binding NewDocumentCommand}" Header="New" />
                    <MenuItem Command="{Binding OpenDocumentCommand}" Header="Open" />
                    <Separator />
                    <MenuItem Command="{Binding ActiveDocument.SaveCommand}" Header="Save" />
                    <MenuItem Command="{Binding ActiveDocument.SaveAsCommand}" Header="Save As..." />
                    <Separator />
                    <MenuItem Command="{Binding ActiveDocument.CloseCommand}" Header="Close" />
                </MenuItem>
                <MenuItem Header="Tools">
                    <MenuItem
                        Header="Properties"
                        IsCheckable="True"
                        IsChecked="{Binding FileStats.IsVisible, Mode=TwoWay}" />
                </MenuItem>
                <MenuItem Header="Layout">
                    <MenuItem Command="{Binding LoadLayoutCommand}" Header="Load" />
                    <MenuItem Command="{Binding SaveLayoutCommand}" Header="Save" />
                </MenuItem>
            </Menu>

            <ComboBox
                DisplayMemberPath="Item1"
                ItemsSource="{Binding Themes}"
                SelectedItem="{Binding SelectedTheme}"
                Margin="10,0,0,0" />
        </WrapPanel>
        <DockingManager
            Grid.Row="1"
            ActiveContent="{Binding SelectedDocument, Mode=TwoWay}"
            AnchorablesSource="{Binding Tools}"
            DocumentsSource="{Binding Documents}">
            <DockingManager.Theme>
                <wpfui:WPFUITheme/>
            </DockingManager.Theme>
            
        </DockingManager>
    </Grid>
</Window>
